{"ast":null,"code":"import _objectSpread from \"/home/patty/dev/assignments/projects/pictureapp/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/patty/dev/assignments/projects/pictureapp/src/GlobalProvider.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nconst MyContext = React.createContext();\n\nclass GlobalProvider extends Component {\n  constructor() {\n    super();\n\n    this.signup = userInfo => {\n      //userInfo is an object with username and pass fields\n      return axios.post(\"/auth/signup\", userInfo).then(response => {\n        const _response$data = response.data,\n              user = _response$data.user,\n              token = _response$data.token;\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        this.setState({\n          user,\n          token\n        });\n        return response;\n      });\n    };\n\n    this.login = credentials => {\n      return axios.post(\"/auth/login\", credentials).then(response => {\n        const _response$data2 = response.data,\n              token = _response$data2.token,\n              user = _response$data2.user;\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n      });\n    };\n\n    this.login = credentials => {\n      return axios.post(\"/auth/login\", credentials).then(response => {\n        const _response$data3 = response.data,\n              token = _response$data3.token,\n              user = _response$data3.user;\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        this.setState({\n          user,\n          token\n        }); // Don't forget to get this newly-logged-in user's todos!\n\n        this.getConversations();\n        return response;\n      });\n    };\n\n    this.logout = () => {\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"token\");\n      this.setState({\n        todos: [],\n        user: {},\n        token: \"\"\n      });\n    };\n\n    this.setSearchWord = newValue => {\n      this.setState({\n        searchword: newValue\n      });\n    };\n\n    this.state = {\n      conversations: [],\n      searchword: '',\n      user: JSON.parse(localStorage.getItem(\"user\")) || {},\n      token: localStorage.getItem(\"token\") || \"\"\n    };\n  }\n\n  render() {\n    return React.createElement(MyContext.Provider, {\n      value: _objectSpread({}, this.state, {\n        signup: this.signup,\n        login: this.login,\n        logout: this.logout,\n        setSearchWord: this.setSearchWord\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default GlobalProvider;\nexport const withProvider = C => props => React.createElement(MyContext.Consumer, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 95\n  },\n  __self: this\n}, value => React.createElement(C, Object.assign({}, value, props, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 96\n  },\n  __self: this\n})));","map":{"version":3,"sources":["/home/patty/dev/assignments/projects/pictureapp/src/GlobalProvider.js"],"names":["React","Component","axios","MyContext","createContext","GlobalProvider","constructor","signup","userInfo","post","then","response","data","user","token","localStorage","setItem","JSON","stringify","setState","login","credentials","getConversations","logout","removeItem","todos","setSearchWord","newValue","searchword","state","conversations","parse","getItem","render","props","children","withProvider","C","value"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\n\nconst MyContext = React.createContext();\n\nclass GlobalProvider extends Component {\n    constructor() {\n        super()\n        this.state = {\n            conversations: [],\n            searchword: '',\n            user: JSON.parse(localStorage.getItem(\"user\")) || {},\n            token: localStorage.getItem(\"token\") || \"\"\n        }\n    }\n\n    \n    signup = userInfo => {\n        //userInfo is an object with username and pass fields\n         return axios.post(\"/auth/signup\", userInfo)\n            .then(response => {\n                const { user, token } = response.data\n                localStorage.setItem(\"token\", token);\n                localStorage.setItem(\"user\", JSON.stringify(user));\n                this.setState({\n                    user,\n                    token\n                });\n                return response;\n        });   \n    }\n\n    login = (credentials) => {\n        return axios.post(\"/auth/login\", credentials)\n            .then(response => {\n                const { token, user } = response.data;\n                localStorage.setItem(\"token\", token);\n                localStorage.setItem(\"user\", JSON.stringify(user));\n            })\n    }\n\n    login = credentials => {\n        return axios.post(\"/auth/login\", credentials)\n            .then(response => {\n                const { token, user } = response.data;\n                localStorage.setItem(\"token\", token)\n                localStorage.setItem(\"user\", JSON.stringify(user))\n                this.setState({\n                    user,\n                    token\n                });\n                \n                // Don't forget to get this newly-logged-in user's todos!\n                this.getConversations();\n                return response;\n            })\n    }\n\n    \n    logout = () => {\n        localStorage.removeItem(\"user\");\n        localStorage.removeItem(\"token\");\n        this.setState({\n            todos: [],\n            user: {},\n            token: \"\"\n        })\n    }\n\n    setSearchWord = newValue => {\n        this.setState({searchword:newValue});\n\n    }\n    \n    render() {\n        return (\n            <MyContext.Provider\n                value={{\n                    ...this.state,\n                    signup: this.signup,\n                    login: this.login, \n                    logout: this.logout,\n                    setSearchWord:this.setSearchWord\n                }}\n            >\n                {this.props.children}\n            </MyContext.Provider>\n        )\n    }\n}\n \nexport default GlobalProvider;\n\nexport const withProvider = C => props => (\n    <MyContext.Consumer>\n        {value => <C {...value} {...props} /> }\n    </MyContext.Consumer>\n)"]},"metadata":{},"sourceType":"module"}